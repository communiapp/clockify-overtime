(function(){var e={6431:function(e,t,a){"use strict";a(7512);var s=a(7417),r=a(2781);function n(e,t,a,s,n,o){const i=(0,r.up)("Overtime");return(0,r.wg)(),(0,r.j4)(i)}var o=a(5597);const i=e=>((0,r.dD)("data-v-3b59eb61"),e=e(),(0,r.Cn)(),e),l={class:"header"},u=i((()=>(0,r._)("div",null,[(0,r._)("a",{href:"https://clockify.me/tracker"},[(0,r._)("img",{src:"https://clockify.me/assets/images/clockify-logo.svg",alt:"Clockify logo"})])],-1))),c={key:0,class:"avatar"},d=["src"],m=i((()=>(0,r._)("p",null,[(0,r.Uk)(' Enter your data below and click "Submit" to calculate overtime.'),(0,r._)("br"),(0,r.Uk)(" Disclaimer: This app does not have a backend 😉. Your data is only sent to the Clockify API. ")],-1))),f=i((()=>(0,r._)("a",{href:"https://clockify.me/user/settings"},"Get your API key here",-1))),p=["src"],j=(0,r.Uk)("Submit"),w=(0,r.Uk)("PDF herunterladen"),v=(0,r.Uk)(" Business hours (considering holidays): "),y=i((()=>(0,r._)("br",null,null,-1))),k=(0,r.Uk)(" Allocated hours: "),g=i((()=>(0,r._)("br",null,null,-1))),h={key:0},b=(0,r.Uk)(" Please check the following dates in Clockify. Each day that is not a bavarian holiday should be allocated as either: "),S=i((()=>(0,r._)("ul",null,[(0,r._)("li",null,"Work"),(0,r._)("li",null,"Vacation"),(0,r._)("li",null,"Sick leave")],-1))),_=i((()=>(0,r._)("h3",null,"Anmerkung",-1))),O=i((()=>(0,r._)("p",null,"Vor dem 01.07.22 mussten Feiertage getrackt werden, danach nicht mehr.",-1)));function U(e,t,a,s,n,i){const U=(0,r.up)("a-col"),D=(0,r.up)("a-row"),z=(0,r.up)("a-input"),I=(0,r.up)("a-form-item"),A=(0,r.up)("a-select-option"),H=(0,r.up)("a-select"),W=(0,r.up)("a-range-picker"),R=(0,r.up)("a-button"),K=(0,r.up)("a-form");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",l,[u,e.formState.userAvatarUrl?((0,r.wg)(),(0,r.iD)("div",c,[(0,r._)("img",{src:e.formState.userAvatarUrl,alt:"User Avatar"},null,8,d)])):(0,r.kq)("",!0)]),(0,r.Wm)(D,null,{default:(0,r.w5)((()=>[(0,r.Wm)(U,{offset:"4"},{default:(0,r.w5)((()=>[m])),_:1})])),_:1}),(0,r.Wm)(K,{ref:"formRef",model:e.formState,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.rules},{default:(0,r.w5)((()=>[(0,r.Wm)(I,{required:"","has-feedback":"",label:"Clockify API key",name:"apiKey"},{extra:(0,r.w5)((()=>[f])),default:(0,r.w5)((()=>[(0,r.Wm)(z,{value:e.formState.apiKey,"onUpdate:value":t[0]||(t[0]=t=>e.formState.apiKey=t)},null,8,["value"])])),_:1}),(0,r.Wm)(I,{required:"",label:"Workspace"},{default:(0,r.w5)((()=>[(0,r.Wm)(H,{value:e.formState.workspace,"onUpdate:value":t[1]||(t[1]=t=>e.formState.workspace=t),placeholder:"please select workspace"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.formState.workspaces,(e=>((0,r.wg)(),(0,r.j4)(A,{key:e.id,value:e.id},{default:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1}),e.formState.isAdmin?((0,r.wg)(),(0,r.j4)(I,{key:0,required:"",label:"User"},{default:(0,r.w5)((()=>[(0,r.Wm)(H,{value:e.formState.userId,"onUpdate:value":t[2]||(t[2]=t=>e.formState.userId=t),placeholder:"please select user"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.formState.users,(e=>((0,r.wg)(),(0,r.j4)(A,{key:e.id,value:e.id},{default:(0,r.w5)((()=>[(0,r._)("span",null,[(0,r._)("img",{src:e.profilePicture,height:"20",width:"20",style:{"vertical-align":"middle","margin-right":"0.33em","border-radius":"50%"}},null,8,p),(0,r.Uk)(" "+(0,o.zw)(e.name),1)])])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(I,{required:"",label:"Period"},{default:(0,r.w5)((()=>[(0,r.Wm)(W,{ranges:e.ranges,value:e.formState.period,"onUpdate:value":t[3]||(t[3]=t=>e.formState.period=t),style:{width:"100%"}},null,8,["ranges","value"])])),_:1}),(0,r.Wm)(I,{required:"",label:"Working hours per week"},{default:(0,r.w5)((()=>[(0,r.Wm)(z,{value:e.formState.workingHours,"onUpdate:value":t[4]||(t[4]=t=>e.formState.workingHours=t)},null,8,["value"])])),_:1}),(0,r.Wm)(I,{required:"",label:"Working days"},{default:(0,r.w5)((()=>[(0,r.Wm)(H,{mode:"multiple",value:e.formState.workingDays,"onUpdate:value":t[5]||(t[5]=t=>e.formState.workingDays=t),placeholder:"please select your working days"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.formState.workingDaysPreset,(e=>((0,r.wg)(),(0,r.j4)(A,{key:e.name,value:e.id},{default:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1}),(0,r.Wm)(I,{"wrapper-col":{span:14,offset:4}},{default:(0,r.w5)((()=>[(0,r.Wm)(R,{type:"primary",onClick:e.onSubmit},{default:(0,r.w5)((()=>[j])),_:1},8,["onClick"])])),_:1}),(0,r.Wm)(I,{"wrapper-col":{span:14,offset:4}},{default:(0,r.w5)((()=>[(0,r.Wm)(R,{type:"secondary",onClick:e.generateReport},{default:(0,r.w5)((()=>[w])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","label-col","wrapper-col","rules"]),e.formState.overtime?((0,r.wg)(),(0,r.j4)(D,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(U,{offset:"4"},{default:(0,r.w5)((()=>[(0,r._)("p",null,[v,(0,r._)("b",null,(0,o.zw)(e.formState.overtime.businessHours)+" h",1),y,k,(0,r._)("b",null,(0,o.zw)(e.formState.overtime.allocatedHours.toFixed(2))+" h",1),g,(0,r.Uk)(" "+(0,o.zw)(e.formState.overtime.isOver?"Overtime":"Missing time")+": ",1),(0,r._)("b",null,(0,o.zw)(e.formState.overtime.overtimeHours.toFixed(2))+" h",1),(0,r.Uk)(" "+(0,o.zw)(e.formState.overtime.isOver?"😁":"😨"),1)]),e.formState.overtime.missingDates.length?((0,r.wg)(),(0,r.iD)("div",h,[b,S,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.formState.overtime.missingDates,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e},(0,o.zw)(e),1)))),128)),_,O])):(0,r.kq)("",!0)])),_:1})])),_:1})):(0,r.kq)("",!0)])}a(3316);var D=a(9948),z=a(6632),I=a(3847),A=a(2582),H=a(6271),W=a(5337),R=a(9240),K=a(8075),C=(a(3773),a(8930),a(4265),a(8999)),L=a.n(C);const T="https://api.clockify.me/api/v1",Z="https://reports.api.clockify.me/v1",P=L().create({baseURL:T,validateStatus:e=>e<400}),E=L().create({baseURL:Z,validateStatus:e=>e<400}),N=L().create({baseURL:Z,validateStatus:e=>e<400,responseType:"blob"});async function x(e){const t=await P.get("/user",{baseURL:T,headers:{"X-Api-Key":e}});return t.data}async function Y(e,t){const a=await P.get(`/workspaces/${t}/users?status=ACTIVE&memberships=NONE&includeRoles=true`,{baseURL:T,headers:{"X-Api-Key":e}});return a.data}async function q(e){const t=await P.get("/workspaces",{baseURL:T,headers:{"X-Api-Key":e}});return t.data}async function F(e,t,a,s,r){const n=await E.post(`/workspaces/${a}/reports/summary`,{dateRangeStart:s.toISOString(),dateRangeEnd:r.toISOString(),summaryFilter:{groups:["USER","DATE"]},users:{ids:[t],contains:"CONTAINS",status:"ALL"},amountShown:"HIDE_AMOUNT"},{baseURL:Z,headers:{"X-Api-Key":e}});return n.data}async function M(e,t,a,s,r){const n=await Y(e,a),o=n.filter((e=>e.id===t))[0],i=await N.post(`/workspaces/${a}/reports/summary`,{dateRangeStart:s.toISOString(),dateRangeEnd:r.toISOString(),exportType:"PDF",summaryFilter:{groups:["USER","DATE"]},userLocale:"de_DE",users:{ids:[t],contains:"CONTAINS",status:"ALL"},amountShown:"HIDE_AMOUNT",zoomLevel:"MONTH"},{baseURL:Z,headers:{"X-Api-Key":e}}),l=i.data,u=new Blob([l],{type:"application/pdf"}),c=window.URL||window.webkitURL,d=window.URL.createObjectURL(u),m=document.createElement("a"),f=o.name+"_"+s.toISOString().split("T")[0]+"_"+r.toISOString().split("T")[0]+".pdf";return m.target="_blank",m.href=d,m.setAttribute("download",f),document.body.appendChild(m),m.click(),m&&m.parentNode&&m.parentNode.removeChild(m),c.revokeObjectURL(d),i.data}async function X(e,t,a,s,r,n,o){const i=await F(e,t,a,(0,D.Z)(s),(0,z.Z)(r));if(console.log(i),i.groupOne.length)return B(i,s,r,n,o)}function B(e,t,a,s,r){const n=e.groupOne[0].duration,o=new Date("2022-06-30"),i=(0,I.Z)({start:t,end:a}).filter((function(e){return!(0,A.Z)(e)&&(!(0,H.Z)(e,o)||!(0,K.HD)(e,"BY"))})).length,l=i*s*60*60,u=n-l,c=(0,I.Z)({start:t,end:a}).filter((t=>!(0,A.Z)(t)&&!(0,K.HD)(t,"BY")&&!e.groupOne[0].children.some((e=>e.name===(0,W.Z)(t,{representation:"date"})))&&r.includes((0,R.Z)(t))));return{allocatedSeconds:n,businessSeconds:l,overtimeSeconds:u,missingDates:c}}async function V(e,t,a,s,r){await M(e,t,a,(0,D.Z)(s),(0,z.Z)(r))}var $=a(8726),J=a.n($),G=a(8987),Q=(0,r.aZ)({name:"OvertimePanel",setup(){const e=localStorage.getItem("overtimeFormState"),t=e?JSON.parse(e):void 0,a=(0,G.iH)(),s=(0,G.qj)({apiKey:(null===t||void 0===t?void 0:t.apiKey)||"",period:[J()().startOf("year"),J()()],workingHours:(null===t||void 0===t?void 0:t.workingHours)||40,workingDays:(null===t||void 0===t?void 0:t.workingDays)||[1,2,3,4,5],workingDaysPreset:[{name:"Monday",id:1},{name:"Tuesday",id:2},{name:"Wednesday",id:3},{name:"Thursday",id:4},{name:"Friday",id:5}],workspaces:[],users:[]}),n=async e=>{const t=await x(e),a=await q(e);s.currentUserId=t.id,s.userId=t.id,s.workspaces=a,s.workspace=t.activeWorkspace,s.userAvatarUrl=t.profilePicture},o=async e=>{var t;const a=await Y(s.apiKey,e);s.users=a,s.isAdmin=null===(t=a.find((e=>e.id===s.currentUserId)))||void 0===t?void 0:t.roles.some((e=>"WORKSPACE_ADMIN"===e.role))};(0,r.YP)((()=>s.workspace),(async e=>{if(e&&s.currentUserId&&s.apiKey){s.userId=s.currentUserId;try{await o(e)}catch(t){console.error(t.message)}}}));const i=async(e,t)=>{if(t)try{await n(t)}catch(a){throw new Error(a.message)}};s.apiKey&&setTimeout((()=>a.value.validateFields("apiKey")),100);const l=async()=>{console.log("submit!",(0,G.IU)(s));const e={apiKey:s.apiKey,workingHours:s.workingHours,workingDays:s.workingDays};if(localStorage.setItem("overtimeFormState",JSON.stringify(e)),s.userId&&s.workspace&&s.period){const e=await X(s.apiKey,s.userId,s.workspace,s.period[0].toDate(),s.period[1].toDate(),s.workingHours/5,s.workingDays);s.overtime=e?{businessHours:J().duration(1e3*e.businessSeconds).asHours(),allocatedHours:J().duration(1e3*e.allocatedSeconds).asHours(),overtimeHours:J().duration(1e3*e.overtimeSeconds).asHours(),isOver:e.overtimeSeconds>0,missingDates:e.missingDates.map((e=>J()(e).format("dd, DD.MM.YYYY")))}:void 0}},u=async()=>{if(s.userId&&s.workspace&&s.period){await V(s.apiKey,s.userId,s.workspace,s.period[0].toDate(),s.period[1].toDate())}},c={apiKey:[{validator:i,trigger:"blur"}]},d={"This Month (so far)":[J()().startOf("month"),J()().subtract(1,"day")],"Last Month":[J()().subtract(1,"month").startOf("month"),J()().subtract(1,"month").endOf("month")],"This Year (so far)":[J()().startOf("year"),J()().subtract(1,"day")],"Last Year":[J()().subtract(1,"year").startOf("year"),J()().subtract(1,"year").endOf("year")]};return{labelCol:{span:4},wrapperCol:{span:14},formRef:a,formState:s,rules:c,ranges:d,onSubmit:l,generateReport:u}}}),ee=a(5774);const te=(0,ee.Z)(Q,[["render",U],["__scopeId","data-v-3b59eb61"]]);var ae=te,se={name:"App",components:{Overtime:ae}};const re=(0,ee.Z)(se,[["render",n]]);var ne=re,oe=(a(3070),a(6470)),ie=a(4198),le=a(8518),ue=a(8600),ce=a(6649),de=a(3864),me=a(9225);(0,s.ri)(ne).use(oe.Z).use(ie.ZP).use(le.ZP).use(ue.ZP).use(ce.ZP).use(de.Z).use(me.Z).mount("#app")},2782:function(e,t,a){var s={"./af":6283,"./af.js":6283,"./ar":752,"./ar-dz":9564,"./ar-dz.js":9564,"./ar-kw":5087,"./ar-kw.js":5087,"./ar-ly":4256,"./ar-ly.js":4256,"./ar-ma":4585,"./ar-ma.js":4585,"./ar-sa":7289,"./ar-sa.js":7289,"./ar-tn":2351,"./ar-tn.js":2351,"./ar.js":752,"./az":8002,"./az.js":8002,"./be":5834,"./be.js":5834,"./bg":9168,"./bg.js":9168,"./bm":2695,"./bm.js":2695,"./bn":8040,"./bn-bd":9869,"./bn-bd.js":9869,"./bn.js":8040,"./bo":5613,"./bo.js":5613,"./br":9704,"./br.js":9704,"./bs":6239,"./bs.js":6239,"./ca":8057,"./ca.js":8057,"./cs":7601,"./cs.js":7601,"./cv":1989,"./cv.js":1989,"./cy":8451,"./cy.js":8451,"./da":6284,"./da.js":6284,"./de":1713,"./de-at":2371,"./de-at.js":2371,"./de-ch":4563,"./de-ch.js":4563,"./de.js":1713,"./dv":67,"./dv.js":67,"./el":7628,"./el.js":7628,"./en-au":1070,"./en-au.js":1070,"./en-ca":9078,"./en-ca.js":9078,"./en-gb":2751,"./en-gb.js":2751,"./en-ie":531,"./en-ie.js":531,"./en-il":2252,"./en-il.js":2252,"./en-in":8161,"./en-in.js":8161,"./en-nz":1317,"./en-nz.js":1317,"./en-sg":9974,"./en-sg.js":9974,"./eo":1771,"./eo.js":1771,"./es":852,"./es-do":376,"./es-do.js":376,"./es-mx":4538,"./es-mx.js":4538,"./es-us":9265,"./es-us.js":9265,"./es.js":852,"./et":3090,"./et.js":3090,"./eu":1865,"./eu.js":1865,"./fa":4724,"./fa.js":4724,"./fi":9374,"./fi.js":9374,"./fil":7158,"./fil.js":7158,"./fo":5679,"./fo.js":5679,"./fr":8943,"./fr-ca":7660,"./fr-ca.js":7660,"./fr-ch":1953,"./fr-ch.js":1953,"./fr.js":8943,"./fy":1350,"./fy.js":1350,"./ga":6552,"./ga.js":6552,"./gd":9425,"./gd.js":9425,"./gl":6281,"./gl.js":6281,"./gom-deva":379,"./gom-deva.js":379,"./gom-latn":6027,"./gom-latn.js":6027,"./gu":1699,"./gu.js":1699,"./he":3066,"./he.js":3066,"./hi":3858,"./hi.js":3858,"./hr":3722,"./hr.js":3722,"./hu":2584,"./hu.js":2584,"./hy-am":80,"./hy-am.js":80,"./id":3113,"./id.js":3113,"./is":9806,"./is.js":9806,"./it":2150,"./it-ch":4609,"./it-ch.js":4609,"./it.js":2150,"./ja":60,"./ja.js":60,"./jv":3695,"./jv.js":3695,"./ka":4419,"./ka.js":4419,"./kk":5353,"./kk.js":5353,"./km":7993,"./km.js":7993,"./kn":4024,"./kn.js":4024,"./ko":7903,"./ko.js":7903,"./ku":9040,"./ku.js":9040,"./ky":5086,"./ky.js":5086,"./lb":344,"./lb.js":344,"./lo":394,"./lo.js":394,"./lt":2300,"./lt.js":2300,"./lv":3e3,"./lv.js":3e3,"./me":8153,"./me.js":8153,"./mi":3407,"./mi.js":3407,"./mk":3893,"./mk.js":3893,"./ml":4575,"./ml.js":4575,"./mn":7739,"./mn.js":7739,"./mr":1729,"./mr.js":1729,"./ms":9630,"./ms-my":4627,"./ms-my.js":4627,"./ms.js":9630,"./mt":1371,"./mt.js":1371,"./my":2904,"./my.js":2904,"./nb":6675,"./nb.js":6675,"./ne":813,"./ne.js":813,"./nl":9607,"./nl-be":2834,"./nl-be.js":2834,"./nl.js":9607,"./nn":1426,"./nn.js":1426,"./oc-lnc":103,"./oc-lnc.js":103,"./pa-in":587,"./pa-in.js":587,"./pl":5434,"./pl.js":5434,"./pt":5777,"./pt-br":1181,"./pt-br.js":1181,"./pt.js":5777,"./ro":97,"./ro.js":97,"./ru":5564,"./ru.js":5564,"./sd":6029,"./sd.js":6029,"./se":2888,"./se.js":2888,"./si":8383,"./si.js":8383,"./sk":1846,"./sk.js":1846,"./sl":9966,"./sl.js":9966,"./sq":5258,"./sq.js":5258,"./sr":9581,"./sr-cyrl":6162,"./sr-cyrl.js":6162,"./sr.js":9581,"./ss":679,"./ss.js":679,"./sv":3402,"./sv.js":3402,"./sw":1824,"./sw.js":1824,"./ta":9165,"./ta.js":9165,"./te":9498,"./te.js":9498,"./tet":9946,"./tet.js":9946,"./tg":4773,"./tg.js":4773,"./th":5429,"./th.js":5429,"./tk":7368,"./tk.js":7368,"./tl-ph":4232,"./tl-ph.js":4232,"./tlh":2689,"./tlh.js":2689,"./tr":138,"./tr.js":138,"./tzl":2134,"./tzl.js":2134,"./tzm":1200,"./tzm-latn":7330,"./tzm-latn.js":7330,"./tzm.js":1200,"./ug-cn":8043,"./ug-cn.js":8043,"./uk":7236,"./uk.js":7236,"./ur":2083,"./ur.js":2083,"./uz":9989,"./uz-latn":463,"./uz-latn.js":463,"./uz.js":9989,"./vi":5639,"./vi.js":5639,"./x-pseudo":8919,"./x-pseudo.js":8919,"./yo":3824,"./yo.js":3824,"./zh-cn":7521,"./zh-cn.js":7521,"./zh-hk":4422,"./zh-hk.js":4422,"./zh-mo":3387,"./zh-mo.js":3387,"./zh-tw":4458,"./zh-tw.js":4458};function r(e){var t=n(e);return a(t)}function n(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=n,e.exports=r,r.id=2782}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=e,function(){var e=[];a.O=function(t,s,r,n){if(!s){var o=1/0;for(c=0;c<e.length;c++){s=e[c][0],r=e[c][1],n=e[c][2];for(var i=!0,l=0;l<s.length;l++)(!1&n||o>=n)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(i=!1,n<o&&(o=n));if(i){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[s,r,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,n,o=s[0],i=s[1],l=s[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(l)var c=l(a)}for(t&&t(s);u<o.length;u++)n=o[u],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},s=self["webpackChunkclockify_overtime"]=self["webpackChunkclockify_overtime"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(6431)}));s=a.O(s)})();
//# sourceMappingURL=app.95ee5c63.js.map